# 服务器配置
PORT=3000
NODE_ENV=development  # development, production, test

# Swagger API文档配置
SWAGGER_USER=admin
SWAGGER_PASSWORD=your_secure_password
SWAGGER_ENABLED=true  # 设置为false可在生产环境禁用API文档

# Google Vision API配置
GOOGLE_VISION_API_KEY=your_google_vision_api_key

# JWT配置 - 安全重要!
# 生产环境中请使用强随机密钥，可用以下命令生成:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=please_change_this_to_a_secure_random_string
JWT_EXPIRES_IN=24h  # 24小时令牌有效期
REFRESH_TOKEN_EXPIRES_IN=30d  # 30天刷新令牌有效期

# Cookie配置
COOKIE_SECRET=please_change_this_to_a_secure_random_string  # Cookie签名密钥
SESSION_SECRET=please_change_this_to_a_secure_random_string  # 会话密钥

# CSRF保护配置
CSRF_SECRET=please_change_this_to_a_secure_random_string  # CSRF令牌密钥

# 速率限制配置
RATE_LIMIT_WINDOW_MS=60000  # 速率限制窗口大小（毫秒）
RATE_LIMIT_MAX_REQUESTS=30  # 窗口内最大请求数
AUTH_RATE_LIMIT_WINDOW_MS=900000  # 认证请求速率限制窗口大小（毫秒）
AUTH_RATE_LIMIT_MAX_REQUESTS=10  # 认证请求窗口内最大请求数
OCR_RATE_LIMIT_WINDOW_MS=60000  # OCR请求速率限制窗口大小（毫秒）
OCR_RATE_LIMIT_MAX_REQUESTS=5  # OCR请求窗口内最大请求数

# 日志配置
LOG_LEVEL=info  # debug, info, warn, error
LOG_DIR=../logs  # 日志目录

# CORS配置
CORS_ORIGINS=http://localhost:8080,https://localhost:8443  # 允许的来源，逗号分隔

# 数据库配置
MONGODB_URI=mongodb://localhost:27017/ocr_app
MONGODB_DB_NAME=ocr_app

# RabbitMQ配置
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=ocr-user
RABBITMQ_PASSWORD=ocr-password
RABBITMQ_VHOST=/ocr-app
RABBITMQ_HEARTBEAT=60
RABBITMQ_CONNECTION_TIMEOUT=30000
RABBITMQ_RECONNECT_DELAY=5000
RABBITMQ_MAX_RECONNECT_ATTEMPTS=5
RABBITMQ_PREFETCH_COUNT=10

# 队列功能配置
ENABLE_OCR_QUEUE=true
ENABLE_NOTIFICATIONS=true
ENABLE_WEBSOCKET=true
ENABLE_EMAIL=false

# 邮件配置（如果启用邮件通知）
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-email-password
EMAIL_FROM=OCR App <noreply@ocrapp.com>

# 队列监控配置
HEALTH_CHECK_INTERVAL=30000
METRICS_COLLECTION_INTERVAL=60000
QUEUE_ALERT_THRESHOLD=1000
PROCESSING_TIME_ALERT_THRESHOLD=300000
ERROR_RATE_ALERT_THRESHOLD=0.1

# 文件上传配置
MAX_FILE_SIZE=25000000  # 最大文件大小（字节）
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,image/heic,application/pdf  # 允许的文件类型，逗号分隔
UPLOAD_DIR=../uploads  # 上传目录

# 代理配置
# ========================
# 以下环境变量用于控制代理行为
# 默认情况下，系统会自动检测是否需要使用代理

# 手动强制使用代理，无论环境如何
# FORCE_PROXY=true

# 手动禁用代理，无论环境如何
# DISABLE_PROXY=true

# 代理服务器地址 (如果不设置，默认使用 http://127.0.0.1:7890)
# HTTP_PROXY=http://your-proxy-server:port
# HTTPS_PROXY=http://your-proxy-server:port
# ALL_PROXY=socks5://your-socks-proxy:port

# 注意：在Google Cloud环境中，系统会自动检测并禁用代理
# 如果您的Google Cloud环境需要特殊的代理配置，请设置上述环境变量