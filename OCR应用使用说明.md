# OCR应用使用说明

## 简介

这是一款基于Vue 3开发的OCR（光学字符识别）应用，可以识别图片和PDF文件中的文字内容。应用支持灵活的文本过滤和坐标视图展示，适用于各类文档的文字提取和分析。

## 主要功能

- 支持上传图片和PDF文件进行OCR识别
- 支持PDF文件的多页浏览和识别
- 提供多种文本显示模式（水平段落、水平并行、垂直段落、垂直并行）
- 提供坐标视图，展示文本在原图中的位置
- 支持根据字体大小、宽高比等多种条件过滤文本
- 支持点击复制任意文本区域的内容，包括倾斜文本
- 支持区块、段落、单词、字符四个级别的边界显示
- 适配Google Cloud Vision API进行OCR识别

## 使用步骤

### 1. 启动应用

```bash
npm install  # 首次使用需安装依赖
npm run dev  # 启动开发服务器
```

访问 `http://localhost:5173`（或控制台显示的其他地址）打开应用。

### 2. 设置API密钥

1. 点击页面右上角的设置图标，打开API设置面板
2. 输入您的Google Cloud Vision API密钥
3. 点击保存

**注意**：初次使用前必须设置有效的API密钥，否则无法进行OCR识别。

### 3. 上传文件

1. 点击"选择文件"按钮或将文件拖拽到上传区域
2. 支持的文件类型：PNG、JPG、JPEG、PDF
3. 文件上传后会在图像显示区域预览

### 4. 开始OCR识别

1. 上传文件后，点击"开始识别"按钮
2. 选择文本方向（自动、水平、垂直）
3. 等待识别完成，期间会显示进度提示

### 5. 查看识别结果

识别完成后，结果会以两种方式展示：

#### 文本输出区

- 提供四种文本显示模式：
  - 水平段落：按段落水平排列文本
  - 水平并行：保持原文横向排列
  - 垂直段落：按段落垂直排列文本
  - 垂直并行：保持原文纵向排列

- 可通过顶部的标签页切换不同的显示模式
- 文本区域支持复制全部内容

#### 坐标视图

- 显示文本在原图中的精确位置
- 支持四种区块级别：区块、段落、单词、字符
- 功能按钮：
  - 显示/隐藏区块：控制红色边界框的显示
  - 区块级别选择：切换不同的显示粒度

- 交互功能：
  - 鼠标悬停在多边形上：显示该区域详细信息（坐标、宽高）
  - 点击任意多边形区域：复制该区域的文本内容
  - 支持正常文本和倾斜文本的复制

### 6. 使用过滤器

识别完成后，页面底部会显示过滤控制面板：

1. 字体大小过滤器：滑动调整最小和最大字体大小
2. 宽高比过滤器：滑动调整文本宽高比范围
3. 字符可见性控制：通过滑块控制哪些字符可见

过滤器实时生效，会同时更新文本输出和坐标视图。

## 功能详解

### PDF控制

对于PDF文件，应用提供页面控制功能：

- 上一页/下一页按钮：浏览多页PDF
- 页码显示：当前页/总页数
- 每页需单独进行OCR识别

### 坐标系统

坐标视图使用像素坐标系统：

- 原点(0,0)位于左上角
- X轴向右为正方向
- Y轴向下为正方向
- 红色虚线多边形表示识别出的文本区域
- 坐标轴上标注了像素刻度

### 区块级别说明

- 区块：最大的文本组织单位，通常是一个段落或内容块
- 段落：语义相关的一组文本行
- 单词：由空格分隔的词语
- 字符：单个文字或符号

### 复制功能

- 点击任意多边形区域：复制该区域的文本内容
- 成功复制后会显示"文本已复制"提示
- 支持所有文本类型，包括倾斜文本

## 技术说明

- 前端框架：Vue 3 + Vite
- 状态管理：Pinia
- PDF渲染：PDF.js
- OCR服务：Google Cloud Vision API
- 数据传输：使用安全的HTTPS协议

## 常见问题

1. **为什么我无法开始OCR识别？**
   - 检查API密钥是否正确设置
   - 确保上传了支持的文件格式
   - 检查网络连接是否正常

2. **为什么某些文本无法被识别？**
   - 图像质量较低可能影响识别准确率
   - 特殊字体或样式可能难以识别
   - 检查过滤器设置是否过滤掉了部分内容

3. **如何提高识别准确率？**
   - 使用高清晰度的图像
   - 确保文档对比度良好
   - 对于PDF，选择文本PDF而非扫描PDF效果更好

4. **为什么坐标视图中的某些区域无法点击复制？**
   - 检查是否开启了"显示区块"功能
   - 尝试切换不同的区块级别
   - 确认该区域确实包含可识别的文本

## 隐私说明

- 所有文件处理在您的浏览器中进行
- 文件内容仅发送给Google Cloud Vision API进行OCR识别
- API密钥存储在本地，不会发送到其他服务器
- 识别结果不会持久化存储，刷新页面后数据将被清除

---

© 2023 OCR应用 | 使用说明文档 